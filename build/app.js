(function(){function s(){requestAnimationFrame(s,r),u()}function o(){E(s),fillBuildMenu()}function l(){var e=0,t=0,n=[];for(var r=0;r<a.length;r++){n.push(r*32);for(var s=0;s<a[r].length;s++){var o=y(a[r][s]);i.drawImage(o,0,0,32,32,s*32,r*32,32,32)}}}function m(){h[this.attributes[0].value]=1}function g(){for(var e=0;e<mapRows;e++)for(var t=0;t<mapCols;t++){var n=tileMap[e][t]+mapIndexOffset,r=Math.floor(n%8)*32,s=Math.floor(n/8)*32;i.drawImage(tileSheet,r,s,32,32,t*32,e*32,32,32)}}function y(e){if(e===1)return d[0];if(e===2)return d[1]}function b(e){c&&e();var t=!1,n=[];for(var r in h)n.push(h[r]);n.indexOf(0)===-1&&e()}function w(){var e=$("<div id='wrapper'></div>"),t=$("<div id='mainMenu'></div>"),n=$("<ul></ul>"),r=$("<li id='startGameButton'><span>Start Game</span></li>"),i=$("<li id='optionsButton'><span>Options</span></li>");n.append(r,i),t.append(n),e.append(t),$("body").append(e),$("#startGameButton span").on("click",function(){o()})}function E(e){$("#wrapper").fadeOut("normal",e)}function S(){n}(function(){var e=0,t=["ms","moz","webkit","o"];for(var n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var r=(new Date).getTime(),i=Math.max(0,16-(r-e)),s=window.setTimeout(function(){t(r+i)},i);return e=r+i,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})})();const e=800,t=800;var n=!1,r=document.getElementById("canvas"),i=r.getContext("2d");$(function(){o()}),o(),w(),E();var u=function(){b(function(){l()}),drawMenu()},a=[[1,1,1,1,1,1,1,1,1,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],[1,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],f=function(e){var t=e%32;return(e-t)/32};$("#canvas").on("click",function(e){var t=$(this).position().left,n=$(this).position().top,r=e.pageX-t,i=e.pageY-n;console.log(f(r),f(i))});var c=!1,h={},p=["images/tile1.png","images/tile2.png"],d=[];for(var v=0;v<p.length;v++)h[p[v]]=0,d[v]=new Image,d[v].addEventListener("load",m,!1),d[v].src=p[v];init()})